{"version":3,"file":"feiertage.js","sources":["../src/german-translations.ts","../src/holiday-type.ts","../src/regions.ts","../src/feiertage.ts"],"sourcesContent":["import { TranslationTable } from './feiertage';\n\nexport const germanTranslations: TranslationTable = {\n  NEUJAHRSTAG: 'Neujahrstag',\n  HEILIGEDREIKOENIGE: 'Heilige Drei Könige',\n  KARFREITAG: 'Karfreitag',\n  OSTERSONNTAG: 'Ostersonntag',\n  OSTERMONTAG: 'Ostermontag',\n  TAG_DER_ARBEIT: 'Tag der Arbeit',\n  CHRISTIHIMMELFAHRT: 'Christi Himmelfahrt',\n  PFINGSTSONNTAG: 'Pfingstsonntag',\n  PFINGSTMONTAG: 'Pfingstmontag',\n  FRONLEICHNAM: 'Fronleichnam',\n  MARIAHIMMELFAHRT: 'Mariä Himmelfahrt',\n  DEUTSCHEEINHEIT: 'Tag der Deutschen Einheit',\n  REFORMATIONSTAG: 'Reformationstag',\n  ALLERHEILIGEN: 'Allerheiligen',\n  BUBETAG: 'Buß- und Bettag',\n  ERSTERWEIHNACHTSFEIERTAG: '1. Weihnachtstag',\n  ZWEITERWEIHNACHTSFEIERTAG: '2. Weihnachtstag',\n  WELTKINDERTAG: 'Weltkindertag',\n  WELTFRAUENTAG: 'Weltfrauentag',\n  AUGSBURGER_FRIEDENSFEST: 'Augsburger Friedensfest'\n};\n","export type HolidayType =\n  | 'NEUJAHRSTAG'\n  | 'HEILIGEDREIKOENIGE'\n  | 'KARFREITAG'\n  | 'OSTERSONNTAG'\n  | 'OSTERMONTAG'\n  | 'TAG_DER_ARBEIT'\n  | 'CHRISTIHIMMELFAHRT'\n  | 'MARIAHIMMELFAHRT'\n  | 'PFINGSTSONNTAG'\n  | 'PFINGSTMONTAG'\n  | 'FRONLEICHNAM'\n  | 'DEUTSCHEEINHEIT'\n  | 'REFORMATIONSTAG'\n  | 'ALLERHEILIGEN'\n  | 'BUBETAG'\n  | 'ERSTERWEIHNACHTSFEIERTAG'\n  | 'ZWEITERWEIHNACHTSFEIERTAG'\n  | 'WELTKINDERTAG'\n  | 'WELTFRAUENTAG'\n  | 'AUGSBURGER_FRIEDENSFEST'\n  ;\n\nexport const allHolidays: HolidayType[] = [\n  'NEUJAHRSTAG',\n  'HEILIGEDREIKOENIGE',\n  'KARFREITAG',\n  'OSTERSONNTAG',\n  'OSTERMONTAG',\n  'TAG_DER_ARBEIT',\n  'CHRISTIHIMMELFAHRT',\n  'MARIAHIMMELFAHRT',\n  'PFINGSTSONNTAG',\n  'PFINGSTMONTAG',\n  'FRONLEICHNAM',\n  'DEUTSCHEEINHEIT',\n  'REFORMATIONSTAG',\n  'ALLERHEILIGEN',\n  'BUBETAG',\n  'ERSTERWEIHNACHTSFEIERTAG',\n  'ZWEITERWEIHNACHTSFEIERTAG',\n  'WELTKINDERTAG',\n  'WELTFRAUENTAG',\n  'AUGSBURGER_FRIEDENSFEST',\n];\n","export type Region =\n  | 'BW' // Baden-Württemberg\n  | 'BY' // Bayern\n  | 'BE' // Berlin\n  | 'BB' // Brandenburg\n  | 'HB' // Bremen\n  | 'HE' // Hessen\n  | 'HH' // Hamburg\n  | 'MV' // Mecklenburg-Vorpommern\n  | 'NI' // Niedersachsen\n  | 'NW' // Nordrhein-Westfalen\n  | 'RP' // Rheinland-Pfalz\n  | 'SL' // Saarland\n  | 'SN' // Sachsen\n  | 'ST' // Sachsen-Anhalt\n  | 'SH' // Schleswig-Holstein\n  | 'TH' // Thüringen\n  | 'BUND' // Gesamt-Deutschland\n  // Custom regions with local holidays (incompelte) !\n  | 'AUGSBURG'\n  | 'ALL';\n\nexport const allRegions: Region[] = [\n  'BW',\n  'BY',\n  'BE',\n  'BB',\n  'HB',\n  'HE',\n  'HH',\n  'MV',\n  'NI',\n  'NW',\n  'RP',\n  'SL',\n  'SN',\n  'ST',\n  'SH',\n  'TH',\n  'BUND',\n  'AUGSBURG',\n  'ALL',\n];\n","/*!\n * feiertage.js\n * @repository https://github.com/sfakir/feiertagejs\n * @docs https://github.com/sfakir/feiertagejs/blob/master/docs.md\n *\n * Copyright 2015-2021 Simon Fakir\n * Released under the MIT license\n */\n\n//\n// Additional readings\n// - how to format a javascript date: http://blog.stevenlevithan.com/archives/date-time-format\n// - the right javascript date: http://stackoverflow.com/questions/10286204/the-right-json-date-format\n//\n\nimport { germanTranslations } from './german-translations';\nimport { Holiday } from './holiday';\nimport { allHolidays, HolidayType } from './holiday-type';\nimport { allRegions, Region } from './regions';\n\n// translations\n\nconst defaultLanguage: string = 'de';\nlet currentLanguage: string = defaultLanguage;\n\n/**\n * Map of {@link HolidayType} to translation string.\n */\nexport type TranslationTable = { [key in HolidayType]?: string };\n\nconst translations: { [key: string]: TranslationTable } = {\n  de: germanTranslations,\n};\n\n/**\n * adds a translation for the holidays (e.g. english).\n * This also allows to override the German names.\n * Hint: Interpolates German for missing translations\n * @param {string} isoCode of the new language\n * @param {TranslationTable} newTranslation  map of {HolidayType} to translation stringg\n */\nexport function addTranslation(\n  isoCode: string,\n  newTranslation: TranslationTable,\n): void {\n  const code = isoCode.toLowerCase();\n  const defaultTranslation = translations[defaultLanguage];\n  let missingFields = false;\n\n  // fill new Translation with default Language\n  for (const holiday of allHolidays) {\n    if (!newTranslation[holiday]) {\n      missingFields = true;\n      newTranslation[holiday] = defaultTranslation[holiday];\n    }\n  }\n  if (missingFields) {\n    console.warn(\n      '[feiertagejs] addTranslation: you did not add all holidays in your translation! Took German as fallback',\n    );\n  }\n\n  translations[code] = newTranslation;\n}\n\n/**\n * Set a language to default language\n * @param {string} isoCode\n */\nexport function setLanguage(isoCode: string): void {\n  const code = isoCode.toLowerCase();\n  if (!translations[code]) {\n    throw new TypeError(\n      `[feiertagejs] tried to set language to ${code} but the translation is missing. Please use addTranslation(isoCode,object) first`,\n    );\n  }\n  currentLanguage = isoCode;\n}\n\n/**\n * Get currently set language\n * @returns {string}\n */\nexport function getLanguage(): string {\n  return currentLanguage;\n}\n\n// holidays api\n\n/**\n * Checks if a specific date is sunday or holiday.\n * @param date\n * @param region\n * @returns {boolean}\n */\nexport function isSunOrHoliday(date: Date, region: Region): boolean {\n  checkRegion(region);\n  return date.getDay() === 0 || isHoliday(date, region);\n}\n\n/**\n * Check is specific date is holiday.\n * @param date\n * @param {Region} region two character {@link Region} code\n * @returns {boolean}\n */\nexport function isHoliday(date: Date, region: Region): boolean {\n  checkRegion(region);\n\n  const year = date.getFullYear();\n  const internalDate = toUtcTimestamp(date);\n  const holidays = getHolidaysAsUtcTimestamps(year, region);\n\n  return holidays.indexOf(internalDate) !== -1;\n}\n\nexport function getHolidayByDate(\n  date: Date,\n  region: Region = 'ALL',\n): Holiday | void {\n  checkRegion(region);\n  const holidays = getHolidaysOfYear(date.getFullYear(), region);\n  return holidays.find(holiday => holiday.equals(date));\n}\n\n// additional runtime checks\n\n/**\n * Checks if the given region is a valid {@link Region}.\n *\n * @param region {@link Region} to check\n * @throws {Error}\n * @private\n */\nfunction checkRegion(region?: Region): void {\n  if (region === null || region === undefined) {\n    throw new Error(`Region must not be undefined or null`);\n  }\n  if (allRegions.indexOf(region) === -1) {\n    throw new Error(\n      `Invalid region: ${region}! Must be one of ${allRegions.toString()}`,\n    );\n  }\n}\n\n/**\n * Checks if the given holidayName is a valid {@link HolidayType}.\n * @param holidayName {@link HolidayType} to check\n * @throws {Error}\n * @private\n */\nfunction checkHolidayType(holidayName?: HolidayType): void {\n  if (holidayName === null || holidayName === undefined) {\n    throw new TypeError('holidayName must not be null or undefined');\n  }\n  if (allHolidays.indexOf(holidayName) === -1) {\n    throw new Error(\n      `feiertage.js: invalid holiday type \"${holidayName}\"! Must be one of ${allHolidays.toString()}`,\n    );\n  }\n}\n\nexport function isSpecificHoliday(\n  date: Date,\n  holidayName: HolidayType,\n  region: Region = 'ALL',\n): boolean {\n  checkRegion(region);\n  checkHolidayType(holidayName);\n  const holidays = getHolidaysOfYear(date.getFullYear(), region);\n  const foundHoliday = holidays.find(holiday => holiday.equals(date));\n  if (!foundHoliday) {\n    return false;\n  }\n  return foundHoliday.name === holidayName;\n}\n\n/**\n * Returns all holidays of a year in a {@link Region}.\n * @param year\n * @param region\n * @returns {Array.<Holiday>}\n */\nexport function getHolidays(year: number | string, region: Region): Holiday[] {\n  let y: number;\n  if (typeof year === 'string') {\n    y = parseInt(year, 10);\n  } else {\n    y = year;\n  }\n\n  checkRegion(region);\n  return getHolidaysOfYear(y, region);\n}\n\n/**\n *\n * @param year\n * @param region\n * @returns {*}\n * @private\n */\nfunction getHolidaysAsUtcTimestamps(year: number, region: Region): number[] {\n  const holidays = getHolidaysOfYear(year, region);\n  return holidays.map(holiday => toUtcTimestamp(holiday.date));\n}\n\n/**\n *\n * @param year\n * @param region\n * @returns {{objects: Array.<Holiday>, integers}}\n * @private\n */\nfunction getHolidaysOfYear(year: number, region: Region): Holiday[] {\n  const easterDate = getEasterDate(year);\n  const karfreitag = addDays(new Date(easterDate.getTime()), -2);\n  const ostermontag = addDays(new Date(easterDate.getTime()), 1);\n  const christiHimmelfahrt = addDays(new Date(easterDate.getTime()), 39);\n  const pfingstsonntag = addDays(new Date(easterDate.getTime()), 49);\n  const pfingstmontag = addDays(new Date(easterDate.getTime()), 50);\n\n  const holidays: Holiday[] = [\n    ...getCommonHolidays(year),\n    newHoliday('KARFREITAG', karfreitag),\n    newHoliday('OSTERMONTAG', ostermontag),\n    newHoliday('CHRISTIHIMMELFAHRT', christiHimmelfahrt),\n    newHoliday('PFINGSTMONTAG', pfingstmontag),\n  ];\n\n  addHeiligeDreiKoenige(year, region, holidays);\n  addEasterAndPfingsten(year, region, easterDate, pfingstsonntag, holidays);\n  addFronleichnam(region, easterDate, holidays);\n  addMariaeHimmelfahrt(year, region, holidays);\n  addReformationstag(year, region, holidays);\n  addAllerheiligen(year, region, holidays);\n  addBussUndBetttag(year, region, holidays);\n  addWeltkindertag(year, region, holidays);\n  addWeltfrauenTag(year, region, holidays);\n\n  addRegionalHolidays(year, region, holidays);\n\n  return holidays.sort(\n    (a: Holiday, b: Holiday) => a.date.getTime() - b.date.getTime(),\n  );\n}\n\nfunction getCommonHolidays(year: number): Holiday[] {\n  return [\n    newHoliday('NEUJAHRSTAG', makeDate(year, 1, 1)),\n    newHoliday('TAG_DER_ARBEIT', makeDate(year, 5, 1)),\n    newHoliday('DEUTSCHEEINHEIT', makeDate(year, 10, 3)),\n    newHoliday('ERSTERWEIHNACHTSFEIERTAG', makeDate(year, 12, 25)),\n    newHoliday('ZWEITERWEIHNACHTSFEIERTAG', makeDate(year, 12, 26)),\n  ];\n}\nfunction addRegionalHolidays(\n  year: number,\n  region: Region,\n  feiertageObjects: Holiday[],\n) {\n  if (region === 'AUGSBURG') {\n    feiertageObjects.push(\n      newHoliday('AUGSBURGER_FRIEDENSFEST', makeDate(year, 8, 8)),\n    );\n  }\n}\nfunction addHeiligeDreiKoenige(\n  year: number,\n  region: Region,\n  feiertageObjects: Holiday[],\n): void {\n  if (\n    region === 'BW' ||\n    region === 'BY' ||\n    region === 'AUGSBURG' ||\n    region === 'ST' ||\n    region === 'ALL'\n  ) {\n    feiertageObjects.push(\n      newHoliday('HEILIGEDREIKOENIGE', makeDate(year, 1, 6)),\n    );\n  }\n}\n\nfunction addEasterAndPfingsten(\n  year: number,\n  region: Region,\n  easterDate: Date,\n  pfingstsonntag: Date,\n  feiertageObjects: Holiday[],\n): void {\n  if (region === 'BB' || region === 'ALL') {\n    feiertageObjects.push(\n      newHoliday('OSTERSONNTAG', easterDate),\n      newHoliday('PFINGSTSONNTAG', pfingstsonntag),\n    );\n  }\n}\n\nfunction addFronleichnam(\n  region: Region,\n  easterDate: Date,\n  holidays: Holiday[],\n): void {\n  if (\n    region === 'BW' ||\n    region === 'BY' ||\n    region === 'AUGSBURG' ||\n    region === 'HE' ||\n    region === 'NW' ||\n    region === 'RP' ||\n    region === 'SL' ||\n    region === 'ALL'\n  ) {\n    const fronleichnam = addDays(new Date(easterDate.getTime()), 60);\n    holidays.push(newHoliday('FRONLEICHNAM', fronleichnam));\n  }\n}\n\nfunction addMariaeHimmelfahrt(\n  year: number,\n  region: Region,\n  holidays: Holiday[],\n): void {\n  if (region === 'SL' || region === 'BY' || region === 'AUGSBURG') {\n    holidays.push(newHoliday('MARIAHIMMELFAHRT', makeDate(year, 8, 15)));\n  }\n}\n\nfunction addReformationstag(\n  year: number,\n  region: Region,\n  holidays: Holiday[],\n): void {\n  if (\n    year === 2017 ||\n    region === 'NI' ||\n    region === 'BB' ||\n    region === 'HB' ||\n    region === 'HH' ||\n    region === 'MV' ||\n    region === 'SN' ||\n    region === 'ST' ||\n    region === 'TH' ||\n    region === 'ALL'\n  ) {\n    holidays.push(newHoliday('REFORMATIONSTAG', makeDate(year, 10, 31)));\n  }\n}\n\nfunction addAllerheiligen(\n  year: number,\n  region: Region,\n  holidays: Holiday[],\n): void {\n  if (\n    region === 'BW' ||\n    region === 'BY' ||\n    region === 'AUGSBURG' ||\n    region === 'NW' ||\n    region === 'RP' ||\n    region === 'SL' ||\n    region === 'ALL'\n  ) {\n    holidays.push(newHoliday('ALLERHEILIGEN', makeDate(year, 11, 1)));\n  }\n}\n\nfunction addBussUndBetttag(\n  year: number,\n  region: Region,\n  holidays: Holiday[],\n): void {\n  if (region === 'SN' || region === 'ALL') {\n    // @todo write test\n    const bussbettag = getBussBettag(year);\n    holidays.push(\n      newHoliday(\n        'BUBETAG',\n        makeDate(\n          bussbettag.getUTCFullYear(),\n          bussbettag.getUTCMonth() + 1,\n          bussbettag.getUTCDate(),\n        ),\n      ),\n    );\n  }\n}\n\nfunction addWeltkindertag(\n  year: number,\n  region: Region,\n  holidays: Holiday[],\n): void {\n  if (year >= 2019 && (region === 'TH' || region === 'ALL')) {\n    holidays.push(newHoliday('WELTKINDERTAG', makeDate(year, 9, 20)));\n  }\n}\n\nfunction addWeltfrauenTag(\n  year: number,\n  region: Region,\n  feiertageObjects: Holiday[],\n): void {\n  if (region !== 'BE') {\n    return;\n  }\n  if (year < 2018) {\n    return;\n  }\n  feiertageObjects.push(newHoliday('WELTFRAUENTAG', makeDate(year, 3, 8)));\n}\n\n/**\n * Calculates the Easter date of a given year.\n * @param year {number}\n * @returns {Date} Easter date\n * @private\n */\nfunction getEasterDate(year: number): Date {\n  const C = Math.floor(year / 100);\n  // tslint:disable:binary-expression-operand-order\n  // tslint generates false positives in the following blocks\n  const N = year - 19 * Math.floor(year / 19);\n  const K = Math.floor((C - 17) / 25);\n  let I = C - Math.floor(C / 4) - Math.floor((C - K) / 3) + 19 * N + 15;\n  I -= 30 * Math.floor(I / 30);\n  I -=\n    Math.floor(I / 28) *\n    (1 -\n      Math.floor(I / 28) *\n        Math.floor(29 / (I + 1)) *\n        Math.floor((21 - N) / 11));\n  let J = year + Math.floor(year / 4) + I + 2 - C + Math.floor(C / 4);\n  J -= 7 * Math.floor(J / 7);\n  const L = I - J;\n  const M = 3 + Math.floor((L + 40) / 44);\n  const D = L + 28 - 31 * Math.floor(M / 4);\n  // tslint:enable:binary-expression-operand-order\n  return new Date(year, M - 1, D);\n}\n\n/**\n * Computes the \"Buss- und Bettag\"'s date.\n * @param jahr {number}\n * @returns {Date} the year's \"Buss- und Bettag\" date\n * @private\n */\nfunction getBussBettag(jahr: number): Date {\n  const weihnachten = new Date(jahr, 11, 25, 12, 0, 0);\n  const ersterAdventOffset = 32;\n  let wochenTagOffset = weihnachten.getDay() % 7;\n\n  if (wochenTagOffset === 0) {\n    wochenTagOffset = 7;\n  }\n\n  const tageVorWeihnachten = wochenTagOffset + ersterAdventOffset;\n\n  let bbtag = new Date(weihnachten.getTime());\n  bbtag = addDays(bbtag, -tageVorWeihnachten);\n\n  return bbtag;\n}\n\n/**\n * Adds {@code days} days to the given {@link Date}.\n * @param date\n * @param days\n * @returns {Date}\n * @private\n */\nfunction addDays(date: Date, days: number): Date {\n  const changedDate = new Date(date);\n  changedDate.setDate(date.getDate() + days);\n  return changedDate;\n}\n\n/**\n * Creates a new {@link Date}.\n * @param year\n * @param naturalMonth month (1-12)\n * @param day\n * @returns {Date}\n * @private\n */\nfunction makeDate(year: number, naturalMonth: number, day: number): Date {\n  return new Date(year, naturalMonth - 1, day);\n}\n\n/**\n *\n * @param name\n * @param date\n * @returns {Holiday}\n * @private\n */\nfunction newHoliday(name: HolidayType, date: Date): Holiday {\n  return {\n    name,\n    date,\n    dateString: localeDateObjectToDateString(date),\n    trans(lang: string = currentLanguage): string | undefined {\n      console.warn(\n        'FeiertageJs: You are using \"Holiday.trans() method. This will be replaced in the next major version with translate()\"',\n      );\n      return this.translate(lang);\n    },\n    translate(lang: string = currentLanguage): string | undefined {\n      return lang === undefined || lang === null\n        ? undefined\n        : translations[lang][this.name];\n    },\n    getNormalizedDate(): number {\n      return toUtcTimestamp(this.date);\n    },\n    equals(otherDate: Date): boolean {\n      const dateString = localeDateObjectToDateString(otherDate);\n      return this.dateString === dateString;\n    },\n  };\n}\n\n/**\n *\n * @param date\n * @returns {string}\n * @private\n */\nfunction localeDateObjectToDateString(date: Date): string {\n  const normalizedDate = new Date(\n    date.getTime() - date.getTimezoneOffset() * 60 * 1000,\n  );\n  normalizedDate.setUTCHours(0, 0, 0, 0);\n  return normalizedDate.toISOString().slice(0, 10);\n}\n\n/**\n * Returns the UTC timestamp of the given date with hours, minutes, seconds, and milliseconds set to zero.\n * @param date\n * @returns {number} UTC timestamp\n */\nfunction toUtcTimestamp(date: Date): number {\n  const internalDate = new Date(date);\n  internalDate.setHours(0, 0, 0, 0);\n  return internalDate.getTime();\n}\n"],"names":[],"mappings":"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"}